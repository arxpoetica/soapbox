// https://raw.github.com/wearefractal/holla/master/examples/holla.js
;(function(){function e(t,n,r){var i=e.resolve(t);if(null==i){r=r||t;n=n||"root";var s=new Error('Failed to require "'+r+'" from "'+n+'"');s.path=r;s.parent=n;s.require=true;throw s}var o=e.modules[i];if(!o.exports){o.exports={};o.client=o.component=true;o.call(this,o.exports,e.relative(i),o)}return o.exports}e.modules={};e.aliases={};e.resolve=function(t){if(t.charAt(0)==="/")t=t.slice(1);var n=t+"/index.js";var r=[t,t+".js",t+".json",t+"/index.js",t+"/index.json"];for(var i=0;i<r.length;i++){var t=r[i];if(e.modules.hasOwnProperty(t))return t}if(e.aliases.hasOwnProperty(n)){return e.aliases[n]}};e.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/");t=t.split("/");for(var r=0;r<t.length;++r){if(".."==t[r]){e.pop()}else if("."!=t[r]&&""!=t[r]){n.push(t[r])}}return e.concat(n).join("/")};e.register=function(t,n){e.modules[t]=n};e.alias=function(t,n){if(!e.modules.hasOwnProperty(t)){throw new Error('Failed to alias "'+t+'", it does not exist')}e.aliases[n]=t};e.relative=function(t){function r(e,t){var n=e.length;while(n--){if(e[n]===t)return n}return-1}function i(n){var r=i.resolve(n);return e(r,t,n)}var n=e.normalize(t,"..");i.resolve=function(i){var s=i.charAt(0);if("/"==s)return i.slice(1);if("."==s)return e.normalize(n,i);var o=t.split("/");var u=r(o,"deps")+1;if(!u)u=0;i=o.slice(0,u+1).join("/")+"/deps/"+i;return i};i.exists=function(t){return e.modules.hasOwnProperty(i.resolve(t))};return i};e.register("LearnBoost-engine.io-protocol/lib/index.js",function(e,t,n){var r=t("./keys");e.protocol=2;var i=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var s=r(i);var o={type:"error",data:"parser error"};e.encodePacket=function(e){var t=i[e.type];if(undefined!==e.data){t+=String(e.data)}return""+t};e.decodePacket=function(e){var t=e.charAt(0);if(Number(t)!=t||!s[t]){return o}if(e.length>1){return{type:s[t],data:e.substring(1)}}else{return{type:s[t]}}};e.encodePayload=function(t){if(!t.length){return"0:"}var n="";var r;for(var i=0,s=t.length;i<s;i++){r=e.encodePacket(t[i]);n+=r.length+":"+r}return n};e.decodePayload=function(t,n){var r;if(t==""){return n(o,0,1)}var i="",s,u;for(var a=0,f=t.length;a<f;a++){var l=t.charAt(a);if(":"!=l){i+=l}else{if(""==i||i!=(s=Number(i))){return n(o,0,1)}u=t.substr(a+1,s);if(i!=u.length){return n(o,0,1)}if(u.length){r=e.decodePacket(u);if(o.type==r.type&&o.data==r.data){return n(o,0,1)}var c=n(r,a+s,f);if(false===c)return}a+=s;i=""}}if(i!=""){return n(o,0,1)}}});e.register("LearnBoost-engine.io-protocol/lib/keys.js",function(e,t,n){n.exports=Object.keys||function(t){var n=[];var r=Object.prototype.hasOwnProperty;for(var i in t){if(r.call(t,i)){n.push(i)}}return n}});e.register("visionmedia-debug/index.js",function(e,t,n){if("undefined"==typeof window){n.exports=t("./lib/debug")}else{n.exports=t("./debug")}});e.register("visionmedia-debug/debug.js",function(e,t,n){function r(e){if(!r.enabled(e))return function(){};return function(t){var n=new Date;var i=n-(r[e]||n);r[e]=n;t=e+" "+t+" +"+r.humanize(i);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}}n.exports=r;r.names=[];r.skips=[];r.enable=function(e){try{localStorage.debug=e}catch(t){}var n=(e||"").split(/[\s,]+/),i=n.length;for(var s=0;s<i;s++){e=n[s].replace("*",".*?");if(e[0]==="-"){r.skips.push(new RegExp("^"+e.substr(1)+"$"))}else{r.names.push(new RegExp("^"+e+"$"))}}};r.disable=function(){r.enable("")};r.humanize=function(e){var t=1e3,n=60*1e3,r=60*n;if(e>=r)return(e/r).toFixed(1)+"h";if(e>=n)return(e/n).toFixed(1)+"m";if(e>=t)return(e/t|0)+"s";return e+"ms"};r.enabled=function(e){for(var t=0,n=r.skips.length;t<n;t++){if(r.skips[t].test(e)){return false}}for(var t=0,n=r.names.length;t<n;t++){if(r.names[t].test(e)){return true}}return false};if(window.localStorage)r.enable(localStorage.debug)});e.register("LearnBoost-engine.io-client/lib/index.js",function(e,t,n){n.exports=t("./socket");n.exports.parser=t("engine.io-parser")});e.register("LearnBoost-engine.io-client/lib/socket.js",function(e,t,n){function f(){}function l(e,t){if(!(this instanceof l))return new l(e,t);t=t||{};if("object"==typeof e){t=e;e=null}if(e){e=r.parseUri(e);t.host=e.host;t.secure=e.protocol=="https"||e.protocol=="wss";t.port=e.port;if(e.query)t.query=e.query}this.secure=null!=t.secure?t.secure:a.location&&"https:"==location.protocol;if(t.host){var n=t.host.split(":");t.hostname=n.shift();if(n.length)t.port=n.pop()}this.hostname=t.hostname||(a.location?location.hostname:"localhost");this.port=t.port||(a.location&&location.port?location.port:this.secure?443:80);this.query=t.query||{};if("string"==typeof this.query)this.query=r.qsParse(this.query);this.upgrade=false!==t.upgrade;this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!t.forceJSONP;this.timestampParam=t.timestampParam||"t";this.timestampRequests=!!t.timestampRequests;this.flashPath=t.flashPath||"";this.transports=t.transports||["polling","websocket","flashsocket"];this.readyState="";this.writeBuffer=[];this.callbackBuffer=[];this.policyPort=t.policyPort||843;this.open();l.sockets.push(this);l.sockets.evs.emit("add",this)}function c(e){var t={};for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return t}var r=t("./util"),i=t("./transports"),s=t("./emitter"),o=t("debug")("engine-client:socket"),u=t("engine.io-parser");n.exports=l;var a=r.global();s(l.prototype);l.protocol=u.protocol;l.sockets=[];l.sockets.evs=new s;l.Socket=l;l.Transport=t("./transport");l.Emitter=t("./emitter");l.transports=t("./transports");l.util=t("./util");l.parser=t("engine.io-parser");l.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=c(this.query);t.EIO=u.protocol;t.transport=e;if(this.id)t.sid=this.id;var n=new i[e]({hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,flashPath:this.flashPath,policyPort:this.policyPort});return n};l.prototype.open=function(){this.readyState="opening";var e=this.createTransport(this.transports[0]);e.open();this.setTransport(e)};l.prototype.setTransport=function(e){var t=this;if(this.transport){o("clearing existing transport");this.transport.removeAllListeners()}this.transport=e;e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})};l.prototype.probe=function(e){function i(i){if(n)return;n=true;var s=new Error("probe error: "+i);s.transport=t.name;t.close();t=null;o('probe transport "%s" failed because of error: %s',e,i);r.emit("error",s)}o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=false,r=this;t.once("open",function(){if(n)return;o('probe transport "%s" opened',e);t.send([{type:"ping",data:"probe"}]);t.once("packet",function(s){if(n)return;if("pong"==s.type&&"probe"==s.data){o('probe transport "%s" pong',e);r.upgrading=true;r.emit("upgrading",t);o('pausing current transport "%s"',r.transport.name);r.transport.pause(function(){if(n)return;if("closed"==r.readyState||"closing"==r.readyState){return}o("changing transport and sending upgrade packet");t.removeListener("error",i);r.emit("upgrade",t);r.setTransport(t);t.send([{type:"upgrade"}]);t=null;r.upgrading=false;r.flush()})}else{o('probe transport "%s" failed',e);var u=new Error("probe error");u.transport=t.name;r.emit("error",u)}})});t.once("error",i);t.open();this.once("close",function(){if(t){o("socket closed prematurely - aborting probe");n=true;t.close();t=null}});this.once("upgrading",function(e){if(t&&e.name!=t.name){o('"%s" works - aborting "%s"',e.name,t.name);t.close();t=null}})};l.prototype.onOpen=function(){o("socket open");this.readyState="open";this.emit("open");this.onopen&&this.onopen.call(this);this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++){this.probe(this.upgrades[e])}}};l.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState){o('socket receive: type "%s", data "%s"',e.type,e.data);this.emit("packet",e);this.emit("heartbeat");switch(e.type){case"open":this.onHandshake(r.parseJSON(e.data));break;case"pong":this.ping();break;case"error":var t=new Error("server error");t.code=e.data;this.emit("error",t);break;case"message":this.emit("data",e.data);this.emit("message",e.data);var n={data:e.data};n.toString=function(){return e.data};this.onmessage&&this.onmessage.call(this,n);break}}else{o('packet received with socket readyState "%s"',this.readyState)}};l.prototype.onHandshake=function(e){this.emit("handshake",e);this.id=e.sid;this.transport.query.sid=e.sid;this.upgrades=this.filterUpgrades(e.upgrades);this.pingInterval=e.pingInterval;this.pingTimeout=e.pingTimeout;this.onOpen();this.ping();this.removeListener("heartbeat",this.onHeartbeat);this.on("heartbeat",this.onHeartbeat)};l.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){if("closed"==t.readyState)return;t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)};l.prototype.ping=function(){var e=this;clearTimeout(e.pingIntervalTimer);e.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout);e.sendPacket("ping");e.onHeartbeat(e.pingTimeout)},e.pingInterval)};l.prototype.onDrain=function(){this.callbacks();this.writeBuffer.splice(0,this.prevBufferLen);this.callbackBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(this.writeBuffer.length==0){this.emit("drain")}else{this.flush()}};l.prototype.callbacks=function(){for(var e=0;e<this.prevBufferLen;e++){if(this.callbackBuffer[e]){this.callbackBuffer[e]()}}};l.prototype.flush=function(){if("closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){o("flushing %d packets in socket",this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit("flush")}};l.prototype.write=l.prototype.send=function(e,t){this.sendPacket("message",e,t);return this};l.prototype.sendPacket=function(e,t,n){var r={type:e,data:t};this.emit("packetCreate",r);this.writeBuffer.push(r);this.callbackBuffer.push(n);this.flush()};l.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.onClose("forced close");o("socket closing - telling transport to close");this.transport.close();this.transport.removeAllListeners()}return this};l.prototype.onError=function(e){o("socket error %j",e);this.emit("error",e);this.onClose("transport error",e)};l.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState){o('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);setTimeout(function(){n.writeBuffer=[];n.callbackBuffer=[]},0);this.readyState="closed";this.emit("close",e,t);this.onclose&&this.onclose.call(this);this.id=null}};l.prototype.filterUpgrades=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){if(~this.transports.indexOf(e[n]))t.push(e[n])}return t}});e.register("LearnBoost-engine.io-client/lib/transport.js",function(e,t,n){function o(e){this.path=e.path;this.hostname=e.hostname;this.port=e.port;this.secure=e.secure;this.query=e.query;this.timestampParam=e.timestampParam;this.timestampRequests=e.timestampRequests;this.readyState=""}var r=t("./util"),i=t("engine.io-parser"),s=t("./emitter");n.exports=o;s(o.prototype);o.prototype.onError=function(e,t){var n=new Error(e);n.type="TransportError";n.description=t;this.emit("error",n);return this};o.prototype.open=function(){if("closed"==this.readyState||""==this.readyState){this.readyState="opening";this.doOpen()}return this};o.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.doClose();this.onClose()}return this};o.prototype.send=function(e){if("open"==this.readyState){this.write(e)}else{throw new Error("Transport not open")}};o.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};o.prototype.onData=function(e){this.onPacket(i.decodePacket(e))};o.prototype.onPacket=function(e){this.emit("packet",e)};o.prototype.onClose=function(){this.readyState="closed";this.emit("close")}});e.register("LearnBoost-engine.io-client/lib/emitter.js",function(e,t,n){var r=t("emitter");n.exports=r;r.prototype.addEventListener=r.prototype.on;r.prototype.removeEventListener=r.prototype.off;r.prototype.removeListener=r.prototype.off});e.register("LearnBoost-engine.io-client/lib/util.js",function(e,t,n){var r=false;e.global=function(){return"undefined"!=typeof window?window:global};e.inherits=function(t,n){function r(){}r.prototype=n.prototype;t.prototype=new r};e.keys=Object.keys||function(e){var t=[];var n=Object.prototype.hasOwnProperty;for(var r in e){if(n.call(e,r)){t.push(r)}}return t};e.on=function(e,t,n,r){if(e.attachEvent){e.attachEvent("on"+t,n)}else if(e.addEventListener){e.addEventListener(t,n,r)}};e.load=function(t){var n=e.global();if(n.document&&document.readyState==="complete"||r){return t()}e.on(n,"load",t,false)};if("undefined"!=typeof window){e.load(function(){r=true})}e.defer=function(t){if(!e.ua.webkit||"undefined"!=typeof importScripts){return t()}e.load(function(){setTimeout(t,100)})};var i=/^[\],:{}\s]*$/;var s=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var u=/(?:^|:|,)(?:\s*\[)+/g;var a=/^\s+/;var f=/\s+$/;e.parseJSON=function(t){var n=e.global();if("string"!=typeof t||!t){return null}t=t.replace(a,"").replace(f,"");if(n.JSON&&JSON.parse){return JSON.parse(t)}if(i.test(t.replace(s,"@").replace(o,"]").replace(u,""))){return(new Function("return "+t))()}};e.ua={};e.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){var e;try{e=new XMLHttpRequest}catch(t){return false}return e.withCredentials!=undefined}();e.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);e.ua.gecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);e.ua.android="undefined"!=typeof navigator&&/android/i.test(navigator.userAgent);e.ua.ios="undefined"!=typeof navigator&&/^(iPad|iPhone|iPod)$/.test(navigator.platform);e.ua.ios6=e.ua.ios&&/OS 6_/.test(navigator.userAgent);e.request=function(r){try{var i=t("xmlhttprequest").XMLHttpRequest;return new i}catch(s){}if(r&&"undefined"!=typeof XDomainRequest&&!e.ua.hasCORS){return new XDomainRequest}try{if("undefined"!=typeof XMLHttpRequest&&(!r||e.ua.hasCORS)){return new XMLHttpRequest}}catch(s){}if(!r){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(s){}}};var l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.parseUri=function(e){var t=l.exec(e||""),n={},r=14;while(r--){n[c[r]]=t[r]||""}return n};e.qs=function(e){var t="";for(var n in e){if(e.hasOwnProperty(n)){if(t.length)t+="&";t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])}}return t};e.qsParse=function(e){var t={};var n=e.split("&");for(var r=0,i=n.length;r<i;r++){var s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}});e.register("LearnBoost-engine.io-client/lib/transports/index.js",function(e,t,n){function f(e){var t,n=false,s=false;if(a.location){var o="https:"==location.protocol;var f=location.port;if(Number(f)!==f){f=o?443:80}n=e.hostname!=location.hostname||f!=e.port;s=e.secure!=o}t=u.request(n);if(s&&a.XDomainRequest&&t instanceof a.XDomainRequest){return new i(e)}if(t&&!e.forceJSONP){return new r(e)}else{return new i(e)}}var r=t("./polling-xhr"),i=t("./polling-jsonp"),s=t("./websocket"),o=t("./flashsocket"),u=t("../util");e.polling=f;e.websocket=s;e.flashsocket=o;var a=u.global();});e.register("LearnBoost-engine.io-client/lib/transports/polling.js",function(e,t,n){function a(e){r.call(this,e)}var r=t("../transport"),i=t("../util"),s=t("engine.io-parser"),o=t("debug")("engine.io-client:polling");n.exports=a;var u=i.global();i.inherits(a,r);a.prototype.name="polling";a.prototype.doOpen=function(){this.poll()};a.prototype.pause=function(e){function r(){o("paused");n.readyState="paused";e()}var t=0;var n=this;this.readyState="pausing";if(this.polling||!this.writable){var i=0;if(this.polling){o("we are currently polling - waiting to pause");i++;this.once("pollComplete",function(){o("pre-pause polling complete");--i||r()})}if(!this.writable){o("we are currently writing - waiting to pause");i++;this.once("drain",function(){o("pre-pause writing complete");--i||r()})}}else{r()}};a.prototype.poll=function(){o("polling");this.polling=true;this.doPoll();this.emit("poll")};a.prototype.onData=function(e){var t=this;o("polling got data %s",e);s.decodePayload(e,function(e,n,r){if("opening"==t.readyState){t.onOpen()}if("close"==e.type){t.onClose();return false}t.onPacket(e)});if("closed"!=this.readyState){this.polling=false;this.emit("pollComplete");if("open"==this.readyState){this.poll()}else{o('ignoring poll - transport state "%s"',this.readyState)}}};a.prototype.doClose=function(){o("sending close packet");this.send([{type:"close"}])};a.prototype.write=function(e){var t=this;this.writable=false;this.doWrite(s.encodePayload(e),function(){t.writable=true;t.emit("drain")})};a.prototype.uri=function(){var e=this.query||{};var t=this.secure?"https":"http";var n="";if(u.ActiveXObject||i.ua.android||i.ua.ios6||this.timestampRequests){e[this.timestampParam]=+(new Date)}e=i.qs(e);if(this.port&&("https"==t&&this.port!=443||"http"==t&&this.port!=80)){n=":"+this.port}if(e.length){e="?"+e}return t+"://"+this.hostname+n+this.path+e}});e.register("LearnBoost-engine.io-client/lib/transports/polling-xhr.js",function(e,t,n){function f(){}function l(e){r.call(this,e);if(u.location){var t="https:"==location.protocol;var n=location.port;if(Number(n)!==n){n=t?443:80}this.xd=e.hostname!=u.location.hostname||n!=e.port}}function c(e){this.method=e.method||"GET";this.uri=e.uri;this.xd=!!e.xd;this.async=false!==e.async;this.data=undefined!=e.data?e.data:null;this.create()}var r=t("./polling"),i=t("../util"),s=t("../emitter"),o=t("debug")("engine.io-client:polling-xhr");n.exports=l;n.exports.Request=c;var u=i.global();var a=u[["Active"].concat("Object").join("X")];i.inherits(l,r);l.prototype.doOpen=function(){var e=this;i.defer(function(){r.prototype.doOpen.call(e)})};l.prototype.request=function(e){e=e||{};e.uri=this.uri();e.xd=this.xd;return new c(e)};l.prototype.doWrite=function(e,t){var n=this.request({method:"POST",data:e});var r=this;n.on("success",t);n.on("error",function(e){r.onError("xhr post error",e)});this.sendXhr=n};l.prototype.doPoll=function(){o("xhr poll");var e=this.request();var t=this;e.on("data",function(e){t.onData(e)});e.on("error",function(e){t.onError("xhr poll error",e)});this.pollXhr=e};s(c.prototype);c.prototype.create=function(){var e=this.xhr=i.request(this.xd);var t=this;e.open(this.method,this.uri,this.async);if("POST"==this.method){try{if(e.setRequestHeader){e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}else{e.contentType="text/plain"}}catch(n){}}if(this.xd&&u.XDomainRequest&&e instanceof XDomainRequest){e.onerror=function(e){t.onError(e)};e.onload=function(){t.onData(e.responseText)};e.onprogress=f}else{if("withCredentials"in e){e.withCredentials=true}e.onreadystatechange=function(){var n;try{if(4!=e.readyState)return;if(200==e.status||1223==e.status){n=e.responseText}else{t.onError(e.status)}}catch(r){t.onError(r)}if(undefined!==n){t.onData(n)}}}o("sending xhr with url %s | data %s",this.uri,this.data);e.send(this.data);if(a){this.index=c.requestsCount++;c.requests[this.index]=this}};c.prototype.onSuccess=function(){this.emit("success");this.cleanup()};c.prototype.onData=function(e){this.emit("data",e);this.onSuccess()};c.prototype.onError=function(e){this.emit("error",e);this.cleanup()};c.prototype.cleanup=function(){if("undefined"==typeof this.xhr){return}this.xhr.onreadystatechange=f;this.xhr.onload=this.xhr.onerror=f;try{this.xhr.abort()}catch(e){}if(a){delete c.requests[this.index]}this.xhr=null};c.prototype.abort=function(){this.cleanup()};if(a){c.requestsCount=0;c.requests={};u.attachEvent("onunload",function(){for(var e in c.requests){if(c.requests.hasOwnProperty(e)){c.requests[e].abort()}}})}});e.register("LearnBoost-engine.io-client/lib/transports/polling-jsonp.js",function(e,t,n){function f(){}function l(e){r.call(this,e);if(!u){if(!s.___eio)s.___eio=[];u=s.___eio}this.index=u.length;var t=this;u.push(function(e){t.onData(e)});this.query.j=this.index}var r=t("./polling"),i=t("../util");n.exports=l;var s=i.global();var o=/\n/g;var u;var a=0;i.inherits(l,r);l.prototype.doOpen=function(){var e=this;i.defer(function(){r.prototype.doOpen.call(e)})};l.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null}r.prototype.doClose.call(this)};l.prototype.doPoll=function(){var e=this;var t=document.createElement("script");if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}t.async=true;t.src=this.uri();t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);this.script=t;if(i.ua.gecko){setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e);document.body.removeChild(e)},100)}};l.prototype.doWrite=function(e,t){function a(){f();t()}function f(){if(n.iframe){try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';u=document.createElement(t)}catch(e){u=document.createElement("iframe");u.name=n.iframeId;u.src="javascript:0"}u.id=n.iframeId;n.form.appendChild(u);n.iframe=u}var n=this;if(!this.form){var r=document.createElement("form");var i=document.createElement("textarea");var s=this.iframeId="eio_iframe_"+this.index;var u;r.className="socketio";r.style.position="absolute";r.style.top="-1000px";r.style.left="-1000px";r.target=s;r.method="POST";r.setAttribute("accept-charset","utf-8");i.name="d";r.appendChild(i);document.body.appendChild(r);this.form=r;this.area=i}this.form.action=this.uri();f();this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(l){}if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(n.iframe.readyState=="complete"){a()}}}else{this.iframe.onload=a}}});e.register("LearnBoost-engine.io-client/lib/transports/websocket.js",function(e,t,n){function a(e){r.call(this,e)}function f(){if("undefined"==typeof window){return t("ws")}return u.WebSocket||u.MozWebSocket}var r=t("../transport"),i=t("engine.io-parser"),s=t("../util"),o=t("debug")("engine.io-client:websocket");n.exports=a;var u=s.global();s.inherits(a,r);a.prototype.name="websocket";a.prototype.doOpen=function(){if(!this.check()){return}var e=this;this.socket=new(f())(this.uri());this.socket.onopen=function(){e.onOpen()};this.socket.onclose=function(){e.onClose()};this.socket.onmessage=function(t){e.onData(t.data)};this.socket.onerror=function(t){e.onError("websocket error",t)}};a.prototype.write=function(e){function s(){t.writable=true;t.emit("drain")}var t=this;this.writable=false;for(var n=0,r=e.length;n<r;n++){this.socket.send(i.encodePacket(e[n]))}if("bufferedAmount"in this.socket){this.bufferedAmountId=setInterval(function(){if(t.socket.bufferedAmount==0){clearInterval(t.bufferedAmountId);s()}},50)}else{setTimeout(s,0)}};a.prototype.onClose=function(){clearInterval(this.bufferedAmountId);r.prototype.onClose.call(this)};a.prototype.doClose=function(){if(typeof this.socket!=="undefined"){this.socket.close()}};a.prototype.uri=function(){var e=this.query||{};var t=this.secure?"wss":"ws";var n="";if(this.port&&("wss"==t&&this.port!=443||"ws"==t&&this.port!=80)){n=":"+this.port}if(this.timestampRequests){e[this.timestampParam]=+(new Date)}e=s.qs(e);if(e.length){e="?"+e}return t+"://"+this.hostname+n+this.path+e};a.prototype.check=function(){var e=f();return!!e&&!("__initialize"in e&&this.name===a.prototype.name)}});e.register("LearnBoost-engine.io-client/lib/transports/flashsocket.js",function(e,t,n){function a(e){r.call(this,e);this.flashPath=e.flashPath;this.policyPort=e.policyPort}function l(e,t){if(f[e])return t();var n=document.createElement("script");var r=false;s('loading "%s"',e);n.onload=n.onreadystatechange=function(){if(r||f[e])return;var i=n.readyState;if(!i||"loaded"==i||"complete"==i){s('loaded "%s"',e);n.onload=n.onreadystatechange=null;r=true;f[e]=true;t()}};n.async=1;n.src=e;var i=document.getElementsByTagName("head")[0];i.insertBefore(n,i.firstChild)}function c(e,t){function n(r){if(!e[r])return t();l(e[r],function(){n(++r)})}n(0)}var r=t("./websocket"),i=t("../util"),s=t("debug")("engine.io-client:flashsocket");n.exports=a;var o=i.global();var u=o[["Active"].concat("Object").join("X")];i.inherits(a,r);a.prototype.name="flashsocket";a.prototype.doOpen=function(){function e(e){return function(){var t=Array.prototype.join.call(arguments," ");s("[websocketjs %s] %s",e,t)}}if(!this.check()){return}WEB_SOCKET_LOGGER={log:e("debug"),error:e("error")};WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=true;WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=true;if("undefined"==typeof WEB_SOCKET_SWF_LOCATION){WEB_SOCKET_SWF_LOCATION=this.flashPath+"WebSocketMainInsecure.swf"}var t=[this.flashPath+"web_socket.js"];if("undefined"==typeof swfobject){t.unshift(this.flashPath+"swfobject.js")}var n=this;c(t,function(){n.ready(function(){WebSocket.__addTask(function(){r.prototype.doOpen.call(n)})})})};a.prototype.doClose=function(){if(!this.socket)return;var e=this;WebSocket.__addTask(function(){r.prototype.doClose.call(e)})};a.prototype.write=function(){var e=this,t=arguments;WebSocket.__addTask(function(){r.prototype.write.apply(e,t)})};a.prototype.ready=function(e){function t(){if(!a.loaded){if(843!=n.policyPort){WebSocket.loadFlashPolicyFile("xmlsocket://"+n.host+":"+n.policyPort)}WebSocket.__initialize();a.loaded=true}e.call(n)}if(typeof WebSocket=="undefined"||!("__initialize"in WebSocket)||!swfobject){return}if(swfobject.getFlashPlayerVersion().major<10){return}var n=this;if(document.body){return t()}i.load(t)};a.prototype.check=function(){if("undefined"==typeof window){return false}if(typeof WebSocket!="undefined"&&!("__initialize"in WebSocket)){return false}if(u){var e=null;try{e=new u("ShockwaveFlash.ShockwaveFlash")}catch(t){}if(e){return true}}else{for(var n=0,r=navigator.plugins.length;n<r;n++){for(var i=0,s=navigator.plugins[n].length;i<s;i++){if(navigator.plugins[n][i].description=="Shockwave Flash"){return true}}}}return false};var f={};});e.register("wearefractal-protosock/dist/main.js",function(e,t,n){(function(){var e,r,i,s,o,u;u=t("./util");e=t("./Client");i=t("./defaultClient");o={createClientWrapper:function(e){return function(t){return o.createClient(e,t)}},createClient:function(t,n){var r;r=u.mergePlugins(i,t);return new e(r,n)}};if(!(typeof window!=="undefined"&&window!==null)){r=t("./Server");s=t("./defaultServer");t("http").globalAgent.maxSockets=999;o.createServer=function(e,t,n){var i;i=u.mergePlugins(s,t);return new r(e,i,n)};o.createServerWrapper=function(e){return function(t,n){return o.createServer(t,e,n)}}}n.exports=o}).call(this)});e.register("wearefractal-protosock/dist/Socket.js",function(e,t,n){(function(){var e;e={write:function(e){var t=this;this.parent.outbound(this,e,function(e){return t.send(e)});return this},disconnect:function(e){this.close(e);return this}};n.exports=e}).call(this)});e.register("wearefractal-protosock/dist/util.js",function(e,t,n){(function(){var e,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t){if(i.call(t,n))e[n]=t[n]}r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e},o=[].slice;e=t("./Socket");r={extendSocket:function(t){return s(t.prototype,e)},mergePlugins:function(){var e,t,n,i,s,u,a;e=1<=arguments.length?o.call(arguments,0):[];n={};for(u=0,a=e.length;u<a;u++){i=e[u];for(t in i){s=i[t];if(typeof s==="object"&&t!=="server"){n[t]=r.mergePlugins(n[t],s)}else{n[t]=s}}}return n}};n.exports=r}).call(this)});e.register("wearefractal-protosock/dist/defaultClient.js",function(e,t,n){(function(){var e;e={options:{},start:function(){},inbound:function(e,t,n){var r;try{r=JSON.parse(t)}catch(i){this.error(e,i)}n(r)},outbound:function(e,t,n){var r;try{r=JSON.stringify(t)}catch(i){this.error(e,i)}n(r)},validate:function(e,t,n){return n(true)},invalid:function(){},connect:function(){},message:function(){},error:function(){},close:function(){}};if(typeof window!=="undefined"&&window!==null){e.options={host:window.location.hostname,port:window.location.port.length>0?parseInt(window.location.port):80,secure:window.location.protocol==="https:"};if(e.options.secure){e.options.port=443}}n.exports=e}).call(this)});e.register("wearefractal-protosock/dist/Client.js",function(e,t,n){(function(){var e,r,i,s,o,u=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t){if(a.call(t,n))e[n]=t[n]}r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e};o=t("./util");if(typeof window!=="undefined"&&window!==null){i=t("engine.io");r=t("emitter")}else{i=t("engine.io-client");r=t("events").EventEmitter}o.extendSocket(i.Socket);s=function(e){if(e>10){return 15e3}else if(e>5){return 5e3}else if(e>3){return 1e3}return 1e3};e=function(e){function t(e,t){var n,r,s,o,a,f,l,c,h;if(t==null){t={}}this.reconnect=u(this.reconnect,this);this.handleClose=u(this.handleClose,this);this.handleError=u(this.handleError,this);this.handleMessage=u(this.handleMessage,this);this.handleConnection=u(this.handleConnection,this);for(r in e){s=e[r];this[r]=s}for(r in t){s=t[r];this.options[r]=s}if((l=(o=this.options).reconnect)==null){o.reconnect=true}if((c=(a=this.options).reconnectLimit)==null){a.reconnectLimit=Infinity}if((h=(f=this.options).reconnectTimeout)==null){f.reconnectTimeout=Infinity}this.isServer=false;this.isClient=true;this.isBrowser=typeof window!=="undefined"&&window!==null;n={host:this.options.host,port:this.options.port,secure:this.options.secure,path:"/"+this.options.namespace,resource:this.options.resource,transports:this.options.transports,upgrade:this.options.upgrade,flashPath:this.options.flashPath,policyPort:this.options.policyPort,forceJSONP:this.options.forceJSONP,forceBust:this.options.forceBust,debug:this.options.debug};this.ssocket=new i(n);this.ssocket.parent=this;this.ssocket.once("open",this.handleConnection);this.ssocket.on("error",this.handleError);this.ssocket.on("message",this.handleMessage);this.ssocket.on("close",this.handleClose);this.start();return}f(t,e);t.prototype.disconnect=function(){this.ssocket.disconnect();return this};t.prototype.destroy=function(){this.options.reconnect=false;this.ssocket.disconnect();this.emit("destroyed");return this};t.prototype.handleConnection=function(){this.emit("connected");return this.connect(this.ssocket)};t.prototype.handleMessage=function(e){var t=this;this.emit("inbound",this.ssocket,e);return this.inbound(this.ssocket,e,function(e){return t.validate(t.ssocket,e,function(n){if(n){t.emit("message",t.ssocket,e);return t.message(t.ssocket,e)}else{t.emit("invalid",t.ssocket,e);return t.invalid(t.ssocket,e)}})})};t.prototype.handleError=function(e){if(typeof e==="string"){e=new Error(e)}return this.error(this.ssocket,e)};t.prototype.handleClose=function(e){var t=this;if(this.ssocket.reconnecting){return}if(this.options.reconnect){return this.reconnect(function(n){if(n==null){return}t.emit("close",t.ssocket,e);return t.close(t.ssocket,e)})}else{this.emit("close",this.ssocket,e);return this.close(this.ssocket,e)}};t.prototype.reconnect=function(e){var t,n,r,i,o,u,a,f=this;if(this.ssocket.reconnecting){return e("Already reconnecting")}this.ssocket.reconnecting=true;if(this.ssocket.readyState==="open"){this.ssocket.disconnect()}u=Date.now();o=this.options.reconnectLimit;a=this.options.reconnectTimeout;t=0;r=function(){f.ssocket.reconnecting=false;f.emit("reconnected");return e()};i=function(t){f.ssocket.reconnecting=false;return e(t)};this.ssocket.once("open",r);n=function(){if(!f.ssocket.reconnecting){return}if(t>=o){return i("Exceeded max attempts")}if(Date.now()-u>a){return i("Timeout on reconnect")}t++;f.ssocket.open();return setTimeout(n,s(t))};return setTimeout(n,s(t))};return t}(r);n.exports=e}).call(this)});e.register("component-indexof/index.js",function(e,t,n){var r=[].indexOf;n.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n){if(e[n]===t)return n}return-1}});e.register("component-emitter/index.js",function(e,t,n){function i(e){if(e)return s(e)}function s(e){for(var t in i.prototype){e[t]=i.prototype[t]}return e}var r=t("indexof");n.exports=i;i.prototype.on=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks[e]=this._callbacks[e]||[]).push(t);return this};i.prototype.once=function(e,t){function r(){n.off(e,r);t.apply(this,arguments)}var n=this;this._callbacks=this._callbacks||{};t._off=r;this.on(e,r);return this};i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var n=this._callbacks[e];if(!n)return this;if(1==arguments.length){delete this._callbacks[e];return this}var i=r(n,t._off||t);if(~i)n.splice(i,1);return this};i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r){n[r].apply(this,t)}}return this};i.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks[e]||[]};i.prototype.hasListeners=function(e){return!!this.listeners(e).length}});e.register("holla/dist/holla.js",function(e,t,n){(function(){var e,r,i,s,o;e=t("./Call");o=t("./shims");r=t("protosock");i={options:{namespace:"holla",resource:"default",debug:false},register:function(e,t){var n=this;this.ssocket.write({type:"register",args:{name:e}});return this.once("register",function(r){if(r){n.user=e;n.emit("authorized")}n.authorized=r;return typeof t==="function"?t(r):void 0})},call:function(t){return new e(this,t,true)},chat:function(e,t){this.ssocket.write({type:"chat",to:e,args:{message:t}});return this},ready:function(e){if(this.authorized){e()}else{this.once("authorized",e)}return this},validate:function(e,t,n){if(this.options.debug){console.log(t)}if(typeof t!=="object"){return n(false)}if(typeof t.type!=="string"){return n(false)}if(t.type==="register"){if(typeof t.args!=="object"){return n(false)}if(typeof t.args.result!=="boolean"){return n(false)}}else if(t.type==="offer"){if(typeof t.from!=="string"){return n(false)}}else if(t.type==="answer"){if(typeof t.args!=="object"){return n(false)}if(typeof t.from!=="string"){return n(false)}if(typeof t.args.accepted!=="boolean"){return n(false)}}else if(t.type==="sdp"){if(typeof t.args!=="object"){return n(false)}if(typeof t.from!=="string"){return n(false)}if(!t.args.sdp){return n(false)}if(!t.args.type){return n(false)}}else if(t.type==="candidate"){if(typeof t.args!=="object"){return n(false)}if(typeof t.from!=="string"){return n(false)}if(typeof t.args.candidate!=="object"){return n(false)}}else if(t.type==="chat"){if(typeof t.args!=="object"){return n(false)}if(typeof t.from!=="string"){return n(false)}if(typeof t.args.message!=="string"){return n(false)}}else if(t.type==="hangup"){if(typeof t.from!=="string"){return n(false)}}else if(t.type==="presence"){if(typeof t.args!=="object"){return n(false)}if(typeof t.args.name!=="string"){return n(false)}if(typeof t.args.online!=="boolean"){return n(false)}}else{return n(false)}return n(true)},error:function(e,t){return this.emit("error",t,e)},message:function(t,n){var r;switch(n.type){case"register":return this.emit("register",n.args.result);case"offer":r=new e(this,n.from,false);return this.emit("call",r);case"presence":this.emit("presence",n.args);return this.emit("presence."+n.args.name,n.args.online);case"chat":this.emit("chat",{from:n.from,message:n.args.message});return this.emit("chat."+n.from,n.args.message);case"hangup":this.emit("hangup",{from:n.from});return this.emit("hangup."+n.from);case"answer":this.emit("answer",{from:n.from,accepted:n.args.accepted});return this.emit("answer."+n.from,n.args.accepted);case"candidate":this.emit("candidate",{from:n.from,candidate:n.args.candidate});return this.emit("candidate."+n.from,n.args.candidate);case"sdp":this.emit("sdp",{from:n.from,sdp:n.args.sdp,type:n.args.type});return this.emit("sdp."+n.from,n.args)}}};s={createClient:r.createClientWrapper(i),Call:e,supported:o.supported,config:o.PeerConnConfig,streamToBlob:function(e){return o.URL.createObjectURL(e)},pipe:function(e,t){var n;n=s.streamToBlob(e);return o.attachStream(n,t)},record:o.recordVideo,createStream:function(e,t){var n,r;if(o.getUserMedia==null){return t("Missing getUserMedia")}n=t;r=function(e){return t(null,e)};o.getUserMedia(e,r,n);return s},createFullStream:function(e){return s.createStream({video:true,audio:true},e)},createVideoStream:function(e){return s.createStream({video:true,audio:false},e)},createAudioStream:function(e){return s.createStream({video:false,audio:true},e)}};n.exports=s}).call(this)});e.register("holla/dist/Call.js",function(e,t,n){(function(){var e,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t){if(o.call(t,n))e[n]=t[n]}r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e};i=t("./shims");r=t("emitter");e=function(e){function t(e,t,n){var r=this;this.parent=e;this.user=t;this.isCaller=n;this.initSDP=s(this.initSDP,this);this.unmute=s(this.unmute,this);this.mute=s(this.mute,this);this.end=s(this.end,this);this.releaseStream=s(this.releaseStream,this);this.decline=s(this.decline,this);this.answer=s(this.answer,this);this.chat=s(this.chat,this);this.duration=s(this.duration,this);this.ready=s(this.ready,this);this.addStream=s(this.addStream,this);this.createConnection=s(this.createConnection,this);this.processRemoteSDP=s(this.processRemoteSDP,this);this.startTime=new Date;this.socket=this.parent.ssocket;this.pc=this.createConnection();if(this.isCaller){this.socket.write({type:"offer",to:this.user})}this.emit("calling");this.parent.on("answer."+this.user,function(e){if(!e){return r.emit("rejected")}r.emit("answered");if(r.isCaller){return r.initSDP()}});this.parent.on("candidate."+this.user,function(e){return r.pc.addIceCandidate(new i.IceCandidate(e))});this.parent.on("sdp."+this.user,this.processRemoteSDP);this.parent.on("hangup."+this.user,function(){return r.emit("hangup")});this.parent.on("chat."+this.user,function(e){return r.emit("chat",e)})}u(t,e);t.prototype.processRemoteSDP=function(e){var t,n,r=this;if(this.pc.remoteDescription){return}console.log(""+this.isCaller+" remote",e);e.sdp=i.processSDPIn(e.sdp);t=function(e){throw e};n=function(){r.emit("sdp");if(!r.isCaller){return r.initSDP()}};return this.pc.setRemoteDescription(new i.SessionDescription(e),n,t)};t.prototype.createConnection=function(){var e,t=this;e=new i.PeerConnection(i.PeerConnConfig,i.constraints);e.onconnecting=function(){t.emit("connecting")};e.onopen=function(){t.emit("connected")};e.onicecandidate=function(e){if(e.candidate){t.socket.write({type:"candidate",to:t.user,args:{candidate:e.candidate}})}};e.onaddstream=function(e){t.remoteStream=e.stream;t._ready=true;t.emit("ready",t.remoteStream)};e.onremovestream=function(e){console.log("removestream",e);t.end();t.emit("hangup")};return e};t.prototype.addStream=function(e){this.localStream=e;this.pc.addStream(e);return this};t.prototype.ready=function(e){if(this._ready){e(this.remoteStream)}else{this.once("ready",e)}return this};t.prototype.duration=function(){var e,t;if(this.endTime!=null){t=this.endTime.getTime()}if(t==null){t=Date.now()}e=this.startTime.getTime();return(t-e)/1e3};t.prototype.chat=function(e){this.parent.chat(this.user,e);return this};t.prototype.answer=function(){this.startTime=new Date;this.socket.write({type:"answer",to:this.user,args:{accepted:true}});return this};t.prototype.decline=function(){this.socket.write({type:"answer",to:this.user,args:{accepted:false}});return this};t.prototype.releaseStream=function(){return this.localStream.stop()};t.prototype.end=function(){this.endTime=new Date;try{this.pc.close()}catch(e){}this.socket.write({type:"hangup",to:this.user});this.emit("hangup");return this};t.prototype.mute=function(){var e,t,n,r,i;r=this.localStream.getAudioTracks();i=[];for(t=0,n=r.length;t<n;t++){e=r[t];i.push(e.enabled=false)}return i};t.prototype.unmute=function(){var e,t,n,r,i;r=this.localStream.getAudioTracks();i=[];for(t=0,n=r.length;t<n;t++){e=r[t];i.push(e.enabled=true)}return i};t.prototype.initSDP=function(){var e,t,n=this;e=function(e){e.sdp=i.processSDPOut(e.sdp);console.log(""+n.isCaller+" local",e);n.pc.setLocalDescription(e);return n.socket.write({type:"sdp",to:n.user,args:e})};t=function(e){throw e};if(this.isCaller){return this.pc.createOffer(e,t,i.constraints)}if(this.pc.remoteDescription){return this.pc.createAnswer(e,t,i.constraints)}else{return this.once("sdp",function(){return n.pc.createAnswer(e,t,i.constraints)})}};return t}(r);n.exports=e}).call(this)});e.register("holla/dist/shims.js",function(e,t,n){(function(){var e,t,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;r=window.mozRTCPeerConnection||window.PeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection;e=window.mozRTCIceCandidate||window.RTCIceCandidate;i=window.mozRTCSessionDescription||window.RTCSessionDescription;t=window.MediaStream||window.webkitMediaStream;f=navigator.mozGetUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia;s=window.URL||window.webkitURL||window.msURL||window.oURL;if(f!=null){f=f.bind(navigator)}u=navigator.mozGetUserMedia?"firefox":"chrome";y=r!=null&&f!=null;a=function(e,t){var n;n=e.match(t);return n!=null?n[1]:null};v=function(e,t){var n,r,i,s,o,u;r=e.split(" ");s=[];for(i=o=0,u=r.length;o<u;i=++o){n=r[i];if(i===3){s[i++]=t}if(n!==t){s[i++]=n}}return s.join(" ")};d=function(e,t){var n,r,i,s,o,u,f;s=e[t].split(" ");for(r=u=0,f=e.length;u<f;r=++u){i=e[r];if(!(i!=null)){continue}o=a(i,/a=rtpmap:(\d+) CN\/\d+/i);if(o!=null){n=s.indexOf(o);if(n!==-1){s.splice(n,1)}e.splice(r,1)}}e[t]=s.join(" ");return e};b=function(e){var t,n,r,i,s,o,u;r=e.split("\r\n");i=function(){var e,i,s;s=[];for(t=e=0,i=r.length;e<i;t=++e){n=r[t];if(n.indexOf("m=audio")!==-1){s.push(t)}}return s}()[0];if(i==null){return e}for(t=o=0,u=r.length;o<u;t=++o){n=r[t];if(!(n.indexOf("opus/48000")!==-1)){continue}s=a(n,/:(\d+) opus\/48000/i);if(s!=null){r[i]=v(r[i],s)}break}r=d(r,i);return r.join("\r\n")};h=function(e){var t,n,r,i,s,o,a,f,l;r=[];if(u==="firefox"){t="a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:BAADBAADBAADBAADBAADBAADBAADBAADBAADBAAD";f=e.split("\r\n");for(i=0,o=f.length;i<o;i++){n=f[i];r.push(n);if(n.indexOf("m=")===0){r.push(t)}}}else{l=e.split("\r\n");for(s=0,a=l.length;s<a;s++){n=l[s];if(n.indexOf("a=ice-options:google-ice")===-1){r.push(n)}}}return b(r.join("\r\n"))};c=function(e){return e};o=function(e,t){var n,r,i;if(typeof t==="string"){return o(e,document.getElementById(t))}else if(t.jquery){t.attr("src",e);for(r=0,i=t.length;r<i;r++){n=t[r];n.play()}}else{t.src=e;t.play()}return t};m=function(e,t){var n,r;r=document.createElement("a");r.href=t;r.target="_blank";r.download=e;n=document.createEvent("Event");n.initEvent("click",true,true);r.dispatchEvent(n);s.revokeObjectURL(r.href)};l=function(e,t){var n;n=new FileReader;n.readAsDataURL(e);return n.onload=function(e){return t(e.target.result)}};p=function(e){var t,n,r,i,s,o,u,a,f,c,h;if(e.jquery){a=e.height();h=e.width();e=e[0]}else{a=e.height;h=e.width}t=document.createElement("canvas");r=t.getContext("2d");t.width=h;t.height=a;s=[];u=function(){var n;n=requestAnimationFrame(u);r.drawImage(e,0,0,h,a);s.push(t.toDataURL("image/webp",1))};o=function(e){var t;t=w.fromImageArray(s,1e3/60);l(t,e);return n};c=function(e){if(e==null){e="recording.webp"}o(function(t){return m(e,t)});return n};i=function(e){cancelAnimationFrame(f);return n};f=requestAnimationFrame(u);n={save:c,getBlob:o,end:i};return n};g=function(){var n,a,d;if(!y){return}if(u==="firefox"){n={iceServers:[{url:"stun:23.21.150.121"}]};a={mandatory:{OfferToReceiveAudio:true,OfferToReceiveVideo:true,MozDontOfferDataChannel:true}};t.prototype.getVideoTracks=function(){return[]};t.prototype.getAudioTracks=function(){return[]}}else{n={iceServers:[{url:"stun:stun.l.google.com:19302"}]};a={mandatory:{OfferToReceiveAudio:true,OfferToReceiveVideo:true},optional:[{DtlsSrtpKeyAgreement:true}]};if(!t.prototype.getVideoTracks){t.prototype.getVideoTracks=function(){return this.videoTracks};t.prototype.getAudioTracks=function(){return this.audioTracks}}if(!r.prototype.getLocalStreams){r.prototype.getLocalStreams=function(){return this.localStreams};r.prototype.getRemoteStreams=function(){return this.remoteStreams}}}d={PeerConnection:r,IceCandidate:e,SessionDescription:i,MediaStream:t,getUserMedia:f,URL:s,attachStream:o,processSDPIn:c,processSDPOut:h,PeerConnConfig:n,browser:u,supported:y,constraints:a,recordVideo:p,loadBlob:l,saveBlob:m};return d};(function(){var e=0;var t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n){window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(t,n){var r=(new Date).getTime();var i=Math.max(0,16-(r-e));var s=window.setTimeout(function(){t(r+i)},i);e=r+i;return s};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(e){clearTimeout(e)}})();var w=function(){function e(e){for(var t=e[0].width,n=e[0].height,i=e[0].duration,s=1;s<e.length;s++){if(e[s].width!=t)throw"Frame "+(s+1)+" has a different width";if(e[s].height!=n)throw"Frame "+(s+1)+" has a different height";if(0>e[s].duration)throw"Frame "+(s+1)+" has a weird duration";i+=e[s].duration}var o=0,e=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:[].slice.call(new Uint8Array((new Float64Array([i])).buffer),0).map(function(e){return String.fromCharCode(e)}).reverse().join(""),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:25541},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:t,id:176},{data:n,id:186}]}]}]},{id:524531317,data:[{data:0,id:231}].concat(e.map(function(e){var t;t=e.data.slice(4);var n=Math.round(o);t=[129,n>>8,n&255,128].map(function(e){return String.fromCharCode(e)}).join("")+t;o+=e.duration;return{data:t,id:163}}))}]}];return r(e)}function t(e){for(var t=[];0<e;)t.push(e&255),e>>=8;return new Uint8Array(t.reverse())}function n(e){for(var t=[],e=(e.length%8?Array(9-e.length%8).join("0"):"")+e,n=0;n<e.length;n+=8)t.push(parseInt(e.substr(n,8),2));return new Uint8Array(t)}function r(e){for(var i=[],s=0;s<e.length;s++){var o=e[s].data;"object"==typeof o&&(o=r(o));"number"==typeof o&&(o=n(o.toString(2)));if("string"==typeof o){for(var u=new Uint8Array(o.length),a=0;a<o.length;a++)u[a]=o.charCodeAt(a);o=u}a=o.size||o.byteLength;u=Math.ceil(Math.ceil(Math.log(a)/Math.log(2))/8);a=a.toString(2);a=Array(7*u+8-a.length).join("0")+a;u=Array(u).join("0")+"1"+a;i.push(t(e[s].id));i.push(n(u));i.push(o)}return new Blob(i,{type:"video/webm"})}function i(e){for(var t=e.RIFF[0].WEBP[0],n=t.indexOf("Â*"),r=0,i=[];4>r;r++)i[r]=t.charCodeAt(n+3+r);r=i[1]<<8|i[0];n=r&16383;r=i[3]<<8|i[2];return{width:n,height:r&16383,data:t,riff:e}}function s(e){for(var t=0,n={};t<e.length;){var r=e.substr(t,4),i=parseInt(e.substr(t+4,4).split("").map(function(e){e=e.charCodeAt(0).toString(2);return Array(8-e.length+1).join("0")+e}).join(""),2),o=e.substr(t+4+4,i),t=t+(8+i);n[r]=n[r]||[];"RIFF"==r||"LIST"==r?n[r].push(s(o)):n[r].push(o)}return n}function o(e,t){this.frames=[];this.duration=1e3/e;this.quality=t||.8}o.prototype.add=function(e,t){if("undefined"!=typeof t&&this.duration)throw"you can't pass a duration if the fps is set";if("undefined"==typeof t&&!this.duration)throw"if you don't have the fps set, you ned to have durations here.";e.canvas&&(e=e.canvas);if(e.toDataURL)e=e.toDataURL("image/webp",this.quality);else if("string"!=typeof e)throw"frame must be a a HTMLCanvasElement, a CanvasRenderingContext2D or a DataURI formatted string";if(!/^data:image\/webp;base64,/ig.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})};o.prototype.compile=function(){return new e(this.frames.map(function(e){var t=i(s(atob(e.image.slice(23))));t.duration=e.duration;return t}))};return{Video:o,fromImageArray:function(t,n){return e(t.map(function(e){e=i(s(atob(e.slice(23))));e.duration=1e3/n;return e}))},toWebM:e}}();n.exports=g()}).call(this)});e.alias("wearefractal-protosock/dist/main.js","holla/deps/protosock/dist/main.js");e.alias("wearefractal-protosock/dist/Socket.js","holla/deps/protosock/dist/Socket.js");e.alias("wearefractal-protosock/dist/util.js","holla/deps/protosock/dist/util.js");e.alias("wearefractal-protosock/dist/defaultClient.js","holla/deps/protosock/dist/defaultClient.js");e.alias("wearefractal-protosock/dist/Client.js","holla/deps/protosock/dist/Client.js");e.alias("wearefractal-protosock/dist/main.js","holla/deps/protosock/index.js");e.alias("component-emitter/index.js","wearefractal-protosock/deps/emitter/index.js");e.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js");e.alias("LearnBoost-engine.io-client/lib/index.js","wearefractal-protosock/deps/engine.io/lib/index.js");e.alias("LearnBoost-engine.io-client/lib/socket.js","wearefractal-protosock/deps/engine.io/lib/socket.js");e.alias("LearnBoost-engine.io-client/lib/transport.js","wearefractal-protosock/deps/engine.io/lib/transport.js");e.alias("LearnBoost-engine.io-client/lib/emitter.js","wearefractal-protosock/deps/engine.io/lib/emitter.js");e.alias("LearnBoost-engine.io-client/lib/util.js","wearefractal-protosock/deps/engine.io/lib/util.js");e.alias("LearnBoost-engine.io-client/lib/transports/index.js","wearefractal-protosock/deps/engine.io/lib/transports/index.js");e.alias("LearnBoost-engine.io-client/lib/transports/polling.js","wearefractal-protosock/deps/engine.io/lib/transports/polling.js");e.alias("LearnBoost-engine.io-client/lib/transports/polling-xhr.js","wearefractal-protosock/deps/engine.io/lib/transports/polling-xhr.js");e.alias("LearnBoost-engine.io-client/lib/transports/polling-jsonp.js","wearefractal-protosock/deps/engine.io/lib/transports/polling-jsonp.js");e.alias("LearnBoost-engine.io-client/lib/transports/websocket.js","wearefractal-protosock/deps/engine.io/lib/transports/websocket.js");e.alias("LearnBoost-engine.io-client/lib/transports/flashsocket.js","wearefractal-protosock/deps/engine.io/lib/transports/flashsocket.js");e.alias("LearnBoost-engine.io-client/lib/index.js","wearefractal-protosock/deps/engine.io/index.js");e.alias("component-emitter/index.js","LearnBoost-engine.io-client/deps/emitter/index.js");e.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js");e.alias("LearnBoost-engine.io-protocol/lib/index.js","LearnBoost-engine.io-client/deps/engine.io-parser/lib/index.js");e.alias("LearnBoost-engine.io-protocol/lib/keys.js","LearnBoost-engine.io-client/deps/engine.io-parser/lib/keys.js");e.alias("LearnBoost-engine.io-protocol/lib/index.js","LearnBoost-engine.io-client/deps/engine.io-parser/index.js");e.alias("LearnBoost-engine.io-protocol/lib/index.js","LearnBoost-engine.io-protocol/index.js");e.alias("visionmedia-debug/index.js","LearnBoost-engine.io-client/deps/debug/index.js");e.alias("visionmedia-debug/debug.js","LearnBoost-engine.io-client/deps/debug/debug.js");e.alias("LearnBoost-engine.io-client/lib/index.js","LearnBoost-engine.io-client/index.js");e.alias("wearefractal-protosock/dist/main.js","wearefractal-protosock/index.js");e.alias("component-emitter/index.js","holla/deps/emitter/index.js");e.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js");e.alias("holla/dist/holla.js","holla/index.js");if(typeof exports=="object"){module.exports=e("holla")}else if(typeof define=="function"&&define.amd){define(function(){return e("holla")})}else{window["holla"]=e("holla")}})();